# Inherited from original media deployment
persistentVolumeClaims:
  sonarr-config:
    requestStorage: '10Gi'
    storageClassName: 'nfs'

# Disable config.xml mounting - let app manage its own config
application:
  config: null

ingress:
  enabled: true
  className: nginx
  host: sonarr.asandov.local
  path: /
  pathType: Prefix

# Configure deployment with volumes and API key sync sidecar
deployment:
  serviceAccountName: media-apps
  # Configure volumes to use shared PVCs
  volumes:
    config:
      persistentVolumeClaim:
        claimName: 'sonarr-config'
    downloads:
      persistentVolumeClaim:
        claimName: 'media-downloads'
    tv:
      persistentVolumeClaim:
        claimName: 'media-library'
  # Use specific UID/GID that matches TrueNAS NFS user
  container:
    env:
      - name: PUID
        value: "1000"
      - name: PGID
        value: "3001"