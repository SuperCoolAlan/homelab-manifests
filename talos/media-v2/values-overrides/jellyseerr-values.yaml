# Jellyseerr configuration for media requests
persistentVolumeClaims:
  jellyseerr-config:
    requestStorage: '5Gi'
    storageClassName: 'nfs'

# Use specific UID/GID that matches TrueNAS NFS user
deployment:
  affinity:
    nodeAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
      - weight: 100
        preference:
          matchExpressions:
          - key: kubernetes.io/hostname
            operator: In
            values:
            - talos-eggbert
  container:
    image:
      repository: 'fallenbagel/jellyseerr'
      tag: '2.7.3'
      pullPolicy: IfNotPresent
    env:
      - name: PUID
        value: "1000"
      - name: PGID
        value: "3001"
      - name: TZ
        value: "America/New_York"

# Disable initial config to let it create its own
application:
  config: null

ingress:
  enabled: true
  className: nginx
  host: jellyseerr.asandov.local
  path: /
  pathType: Prefix
  annotations:
    external-dns.alpha.kubernetes.io/hostname: jellyseerr.asandov.local