# Inherited from original media deployment
persistentVolumeClaims:
  radarr-config:
    requestStorage: '10Gi'
    storageClassName: 'nfs'

# Disable config.xml mounting - let app manage its own config
application:
  config: null

ingress:
  enabled: true
  className: traefik
  host: radarr.asandov.local
  path: /
  pathType: Prefix
  annotations:
    traefik.ingress.kubernetes.io/router.entrypoints: websecure
    traefik.ingress.kubernetes.io/router.tls: "true"
    traefik.ingress.kubernetes.io/router.middlewares: authentik-authentik@kubernetescrd

# Configure deployment with volumes and API key sync sidecar
deployment:
  serviceAccountName: media-apps
  # Configure volumes to use shared PVCs
  volumes:
    config:
      persistentVolumeClaim:
        claimName: 'radarr-config'
    downloads:
      persistentVolumeClaim:
        claimName: 'media-downloads'
    sabnzbd-downloads:
      persistentVolumeClaim:
        claimName: 'sabnzbd-downloads'
    media-library:
      persistentVolumeClaim:
        claimName: 'media-library'
  # Configure volume mounts with subPath
  container:
    image:
      tag: '5.28.0.10274-ls286'
    resources:
      requests:
        memory: "256Mi"
        cpu: "100m"
      limits:
        memory: "1Gi"
        cpu: "1000m"
    volumeMounts:
      - name: 'config'
        mountPath: '/config'
      - name: 'downloads'
        mountPath: '/downloads'
      - name: 'sabnzbd-downloads'
        mountPath: '/downloads-usenet'
      - name: 'media-library'
        mountPath: '/media/film'
        subPath: 'film'